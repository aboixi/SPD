<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">
                
    <ui:define name="title">SimpleSPD-Avisos</ui:define>

    <ui:define name="content">
        <div class="ui-g ui-fluid">
            <div class="ui-g-12 ui-lg-6">
            	<!-- Left Side -->
                <div class="card card-w-title">
                    <h1>Nou avís:</h1>
                  		<h:form id="formulariNouAvis">
                  		<p:messages showDetail="true" showSummary="false" autoUpdate="true" closable="false" />
							<h:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group">	
								<h:outputText value="Tipus Avís: " />
								<p:selectOneMenu id="naalert" value="#{crearAvis.tipus}">
								<f:selectItem itemLabel="Selecciona" itemValue=""/>
	                            <f:selectItem itemLabel="Recepta adicional" itemValue="Recepta adicional" />
	                            <f:selectItem itemLabel="Posologia incorrecte" itemValue="Posologia incorrecte" />
	                            <f:selectItem itemLabel="Codi Erroni" itemValue="Codi Erroni" />
	                            <f:selectItem itemLabel="Recepta caducada" itemValue="Recepta caducada" />
	                            <f:selectItem itemLabel="Medicament caducat" itemValue="Medicament caducat" />
	                            <f:selectItem itemLabel="Altres" itemValue="Altres" />
	                       		</p:selectOneMenu>
								
								<h:outputText value="Destinatari: " />
								<p:selectOneMenu id="naEmpresa" value="#{crearAvis.nomReceptor}">
			           			<f:selectItem itemLabel="Selecciona" itemValue=""/>
	            				<f:selectItems value="#{llistarAvisos.llistaEmpreses}" />
	                       		</p:selectOneMenu>
								
								<h:outputText value="Descripció: " />
								<p:inputTextarea id="nadesc" rows="3" placeholder="Text" value="#{crearAvis.descripcio}"/>
								<p:commandButton actionListener="#{crearAvis.nouAvis}" action="#{llistarAvisos.llistarAvisos}" value="Enviar Avís" update="formulariAvisosEnviats" styleClass="raised-btn" icon="fa fa-send"/>
							</h:panelGrid>
						</h:form>
    	            </div>   
        	    </div>
            <div class="ui-g-12 ui-lg-6">
            	<!-- Right Side -->
                <div class="card card-w-title">
                    <h:form id="formulariAvisosRebuts">
						<p:dataTable id="avisosRebuts" var="item" value="#{llistarAvisos.rebuts}" selectionMode="single" selection="#{canviarEstatAvis.avis}" rowKey="#{item.idAvis}">
							<f:facet name="header">
			                	Rebuts
			                </f:facet>
			                
						    <p:column headerText="Origen" style="text-align: center;width:20%">
						        <h:outputText value="#{item.nomEmisor}" />
						    </p:column>
   
						    <p:column headerText="Tipus Avís" style="text-align: center;width:20%">
						        <h:outputText value="#{item.tipus}" />
						    </p:column>
						    						    
						    <p:column headerText="Descripció" style="width:40%">
						        <h:outputText value="#{item.descripcio}" />
						    </p:column>
						    
						    <p:column headerText="Estat" style="text-align: center;width:20%">
						        <h:outputText value="#{item.estat}" />
						    </p:column>
						</p:dataTable>
            			<h:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group">
            				<p:commandButton actionListener="#{canviarEstatAvis.canviarEstat}" action="#{llistarAvisos.llistarAvisos}" value="Canviar estat" update="formulariAvisosRebuts" styleClass="raised-btn" icon="fa fa-check"/>          				
            			</h:panelGrid>
            		</h:form>
            		<h:form id="formulariAvisosEnviats">
						<p:dataTable id="avisosEnviats" var="item" value="#{llistarAvisos.enviats}" selectionMode="single" selection="#{eliminarAvis.avis}" rowKey="#{item.idAvis}">
							<f:facet name="header">
			                	Enviats
			                </f:facet>
			                
						    <p:column headerText="Destinatari" style="text-align: center;width:20%">
						        <h:outputText value="#{item.nomReceptor}" />
						    </p:column>
   
						    <p:column headerText="Tipus Avís" style="text-align: center;width:20%">
						        <h:outputText value="#{item.tipus}" />
						    </p:column>
						    						    
						    <p:column headerText="Descripció" style="width:40%">
						        <h:outputText value="#{item.descripcio}" />
						    </p:column>
						    
						    <p:column headerText="Estat" style="text-align: center;width:20%">
						        <h:outputText value="#{item.estat}" />
						    </p:column>

							</p:dataTable>
            			<h:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group">
            				<p:commandButton actionListener="#{eliminarAvis.eliminarAvis}" action="#{llistarAvisos.llistarAvisos}" value="Eliminar" update="formulariAvisosEnviats" styleClass="raised-btn" icon="fa fa-minus-circle"/>          								
            			</h:panelGrid>
            		</h:form>
				</div>
			</div>         
        </div>
    </ui:define>
</ui:composition>